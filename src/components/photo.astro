---
import type { Photo } from '@/types/shared';
import { Image } from 'astro:assets';

export interface Props {
  src: Photo;
  alt: string;
  loading?: 'eager' | 'lazy';
  class?: string;
  width?: number;
  height?: number;
}

const { src, loading: loadingProp, ...props } = Astro.props;

const isRemoteImage = typeof src === 'string';
const loading = loadingProp || (import.meta.env.PUBLIC_APP_ENV === 'snapshot' ? 'eager' : 'lazy');
---

{
  isRemoteImage ? (
    <img src={src as string} loading={loading} {...props} />
  ) : (
    <Image format="webp" src={src} loading={loading} {...props} />
  )
}
